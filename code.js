const homeOptions = [
    {
        name: "anatomy",
        insideOptions: [
            {
                title: "יסודות מבנה הגוף",
                titleColor: "red", 
                explain:"מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/Body-structure/",
                icon: "assests/yesodotmivneihaguf.svg",
            },
            {
                title: "מע' העצבים",
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/nerve-system/",
                icon: "assests/2nerve.svg",
            },
            {
                title: "מע' הנשימה",
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/breath-system/",
                icon: "assests/3breath.svg",
            },
            {
                title: "מע' ההובלה",
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/hovala/",
                icon: "assests/4hovala.svg",
            },
            {
                title: "מע' העיכול",
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/haykol/",
                icon: "assests/5digestion.svg",
            },
            {
                title: "מע' העור,שריר, שלד ושתן",
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/sheten-oor-sheled/",
                icon: "assests/6skinmusclebonepiss.svg",
            }]
    },
    {
        name: "resucitation",
        insideOptions: [
            {
                title: 'החייאת ילדים ותינוקות',
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/hachyaa-children/",
                icon: "assests/7baby.svg",
            },
            {
                title: 'סילגו"ז ילדים ותינוקות',
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/silgoz-children/",
                icon: "assests/silguzchild.svg",
            },
            {
                title: 'החייאת מבוגר',
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/hachyaa-adult/",
                icon: "assests/8old.svg",
            },
            {
                title: 'סילגו"ז מבוגר',
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/adult-silgoz/",
                icon: "assests/silguzold.svg",
            },
            {
                title: 'מכשירים החייאה',
                titleColor: "red",
                explain: "מי רוצה להיות חובש? - שאלות חזרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/Machshirim/",
                icon: "assests/resucitationmachines.svg",
            }]
    },
    {
        name: "medication",
        insideOptions: [
            {
                title: 'מבוא למחלות מדבקות',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד על מבוא למחלות מדבקות",
                link: "https://www.youtube.com/watch?v=RjlManlauRo&list=PLPG8RZNM8LuUXDnjeKWAhd6hk6FsRy6T2&index=2&t=0s",
                icon: "assests/9contagious.svg",
            },
            {
                title: 'רפואה ראשונית',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד על הבסיס שלרפואה ראשונית",
                link: "https://youtu.be/wlGR877Bajo",
                icon: "assests/10firstmedic.svg",
            },
            {
                title: 'עקרונות הטיפול התרופתי',
                titleColor: "orenge",
                explain: "למידת מושגים ב-4 דרכים שונות",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/The-principles-of-drug/",
                icon: "assests/11trufati.svg",
            },
            {
                title: 'מצבים דחופים בשגרה',
                titleColor: "orenge",
                explain: "סימולציית טיפול בחייל בשגרה",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/Matzavim-Dhufim-Bashigra/index.html",
                icon: "assests/12herum.svg",
            },
            {
                title: 'מחלות כרוניות ',
                titleColor: "orenge",
                explain: "למידה על מחלות כרוניות נפוצות",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/chronic-diseases/",
                icon: "assests/13chronic.svg",
            },
        ]
    },
    {
        name: "anamnesys",
        insideOptions: [
            {
                title: 'אנמנזה דגלים אדומים',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד ונכיר את הדגלים האדומים באנמנזה",
                link: "https://www.youtube.com/watch?v=sJdyuJLcVW4&list=PLPG8RZNM8LuUXDnjeKWAhd6hk6FsRy6T2&index=17&t=0s",
                icon: "assests/14redflags.svg",
            },
            {
                title: 'אנמנזה כאבי <br>ראש',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד להתמודד עם תלונות על כאבי ראש",
                link: "https://youtu.be/cyKsfXtgevY",
                icon: "assests/15headache.svg",
            },
            {
                title: 'אנמנזה נשימה ',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד להתמודד עם תלונות על נשימה",
                link: "https://youtu.be/sQwS6uYCGto",
                icon: "assests/16breathe.svg",
            },
            {
                title: 'אנמנזה תנועה',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד להתמודד עם תלונות על תנועה",
                link: "https://youtu.be/MEh25gHyYzI",
                icon: "assests/17movement.svg",
            },
            {
                title: 'אנמנזה שתן מין',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד להתמודד עם תלונות על מערכת שתן מין",
                link: "https://youtu.be/5ccQVIRlZjc",
                icon: "assests/18bladder.svg",
            },
            {
                title: 'אנמנזה עיכול',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד להתמודד עם תלונות על מערכת העיכול",
                link: "https://www.youtube.com/watch?v=4JdiKtVV9oQ&list=PLPG8RZNM8LuUXDnjeKWAhd6hk6FsRy6T2&index=5&t=0s",
                icon: "assests/18digestion.svg",
            },
            {
                title: 'אנמנזה עורית ',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד להתמודד עם תלונות על מערכת עורית",
                link: "https://youtu.be/RPCxkKpVX8Y",
                icon: "assests/19skin.svg",
            },
            {
                title: 'עין ואוזן ',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד להתמודד עם תלונות על מערכת עין ואוזן",
                link: "https://www.youtube.com/watch?v=6peuSa4y-nk&list=PLPG8RZNM8LuUXDnjeKWAhd6hk6FsRy6T2&index=19&t=0s",
                icon: "assests/20eareyes.svg",
            }]
    },
    {
        name: "shigra",
        insideOptions: [
            {
                title: 'בדיקות שגרה',
                titleColor: "orenge",
                explain: "תרגול מקדים לפני ביצוע מעשי",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/Routine-testing/",
                icon: "assests/21shigra.svg",
            }]
    },
    {
        name: "trauma",
        insideOptions: [
            {
                title: 'קינימטיקה',
                titleColor: "orenge",
                explain: "למידה ותרגול של הסקת מסקנות מזירת אירוע",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/kinematics",
                icon: "assests/22kinematics.svg",
            },
            {
                title: 'SAB',
                titleColor: "orenge",
                explain: "למידה ותרגול של שלושת השלבים הראשונים לטיפול בפצוע בעת הגעה לאירוע",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/sab/",
                icon: "assests/23sab.svg",
            },
            {
                title: 'CDE ',
                titleColor: "orenge",
                explain: "למידה ותרגול של שלושת השלבים הנוספים לטיפול בפצוע בעת הגעה לאירוע",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/cde/",
                icon: "assests/24cde.svg",
            },
            {
                title: 'סקרים מתקדמים',
                titleColor: "orenge",
                explain: "למידה ותרגול של תפקיד החובש לאחר טיפול ראשוני",
                link: "https://mador-till-prod.github.io/BHD-10-Medics/skarim-mitkadmim/",
                icon: "assests/25skarimmitkadmim.svg",
            },
            {
                title: 'פגיעות אקלים <br>חם',
                titleColor: "yellow",
                explain: "בסרטון זה נלמד על פגיעות אקלים",
                link: "https://youtu.be/9f3pwp0jNKc",
                icon: "assests/26hotclimate.svg",
             }/*,
            // {
            //     title: 'פגיעות אקלים <br>קר',
            //     titleColor: "yellow",
            //     explain: "בסרטון זה נלמד על פגיעות אקלים",
            //     link: "www",
            //     icon: "assests/27coldclimate.svg",
            // }*/]
    }
];

//global var
var placeInJason = null;

if('serviceWorker' in navigator && location.hostname !== 'localhost'){
    let location = "../"
    navigator.serviceWorker.register(location + 'sw.js');
}

window.onload = () => {

    //home menu buttons
    document.getElementById("anatomy-button").addEventListener("click", onClickAnatomyHome);
    document.getElementById("resucitation-button").addEventListener("click", onClickResucitationHome);
    document.getElementById("medication-button").addEventListener("click", onClickMedicationHome);
    document.getElementById("anamnesys-button").addEventListener("click", onClickAnamnesysHome);
    document.getElementById("shigra-button").addEventListener("click", onClickShigraHome);
    document.getElementById("trauma-button").addEventListener("click", onClickTraumaHome);

    //small menu buttons
    document.querySelector(".anatomy").addEventListener("click", onClickAnatomySmall);
    document.querySelector(".resucitation").addEventListener("click", onClickResucitationSmall);
    document.querySelector(".medication").addEventListener("click", onClickMedicationSmall);
    document.querySelector(".anamnesys").addEventListener("click", onClickAnamnesysSmall);
    document.querySelector(".shigra").addEventListener("click", onClickShigraSmall);
    document.querySelector(".trauma").addEventListener("click", onClickTraumaSmall);

    document.querySelectorAll(".menu-icon")[0].addEventListener("click", onClickBurger);
    document.querySelectorAll(".menu-icon")[1].addEventListener("click", onClickBurger);

    document.querySelector(".home-icon").addEventListener("click", backHomePage);
};

function backHomePage() {
    document.querySelector(".home-page").classList.remove("inactive");
    document.querySelector(".info").classList.add("inactive");
}



//other function
function removeOldInfo() {

    while (document.querySelector(".space-of-adding-options").firstChild)
        document.querySelector(".space-of-adding-options").firstChild.remove();
}

function addAllOtions(newOptions) {

    if (placeInJason != null) {
        removeOldInfo();
        document.querySelector(`.${homeOptions[placeInJason].name}`).classList.remove(`${homeOptions[placeInJason].name}-on`);
    }

    //find the options in the array
    for (var i = 0; i < homeOptions.length; i++) {
        if (homeOptions[i].name == newOptions) {
            placeInJason = i;
        }
    }

    //add all the options to the page
    for (var i = 0; i < homeOptions[placeInJason].insideOptions.length; i++) {
        createInsideOptions(homeOptions[placeInJason].insideOptions[i].title, homeOptions[placeInJason].insideOptions[i].titleColor, homeOptions[placeInJason].insideOptions[i].explain,
            homeOptions[placeInJason].insideOptions[i].link, homeOptions[placeInJason].insideOptions[i].icon);
    }
}


function createInsideOptions(headline, headlineColor, explainText, urlLink, img, ...contents) {

    var el = document.createElement("div");

    el.append(showTemplate(headline, headlineColor, explainText, urlLink, img));
    el.attachShadow({ mode: 'open' }).append(document.querySelector(".link-to-prodect").content.cloneNode(true));
    document.querySelector(".space-of-adding-options").append(el);
    el.classList.add("option-area");

    //links the shadow element to the style sheet
    var linkel = document.createElement('link');
    linkel.setAttribute('rel', 'stylesheet');
    linkel.setAttribute('href', 'style.css');
    el.shadowRoot.appendChild(linkel);
}

function showTemplate(headline, headlineColor, explainText, urlLink, img, ...contents) {
    var temp = document.querySelector(".link-to-prodect");
    var newItem = temp.content.querySelector(".headline-link").innerHTML = headline;
    newItem = temp.content.querySelector(".explain-link").innerHTML = explainText;
    newItem = temp.content.querySelector(".img-link").src = img;

    newItem = temp.content.querySelector(".link-area").href = urlLink;


    if (headlineColor == "yellow") {
        newItem = temp.content.querySelector(".headline-link").style.color = "#EEB95B";
    }
    else if (headlineColor == "red") {
        newItem = temp.content.querySelector(".headline-link").style.color = "#EF5B5B";
    }
    else if (headlineColor == "orenge") {
        newItem = temp.content.querySelector(".headline-link").style.color = "#EE755B";
    }

    return newItem;
}

//home button functions
function onClickAnatomyHome() {

    document.querySelector(".home-page").classList.add("inactive");
    document.querySelector(".info").classList.remove("inactive");

    document.querySelector(".anatomy").classList.add("anatomy-on");
    addAllOtions("anatomy");
}

function onClickResucitationHome() {

    document.querySelector(".home-page").classList.add("inactive");
    document.querySelector(".info").classList.remove("inactive");

    document.querySelector(".resucitation").classList.add("resucitation-on");
    addAllOtions("resucitation");
}

function onClickMedicationHome() {

    document.querySelector(".home-page").classList.add("inactive");
    document.querySelector(".info").classList.remove("inactive");

    document.querySelector(".medication").classList.add("medication-on");
    addAllOtions("medication");
}

function onClickAnamnesysHome() {

    document.querySelector(".home-page").classList.add("inactive");
    document.querySelector(".info").classList.remove("inactive");

    document.querySelector(".anamnesys").classList.add("anamnesys-on");
    addAllOtions("anamnesys");
}

function onClickShigraHome() {

    document.querySelector(".home-page").classList.add("inactive");
    document.querySelector(".info").classList.remove("inactive");

    document.querySelector(".shigra").classList.add("shigra-on");
    addAllOtions("shigra");
}

function onClickTraumaHome() {

    document.querySelector(".home-page").classList.add("inactive");
    document.querySelector(".info").classList.remove("inactive");

    document.querySelector(".trauma").classList.add("trauma-on");
    addAllOtions("trauma");
}

//small button functions

function onClickAnatomySmall() {
    document.querySelector(".anatomy").classList.add("anatomy-on");
    addAllOtions("anatomy");
}

function onClickResucitationSmall() {
    document.querySelector(".resucitation").classList.add("resucitation-on");
    addAllOtions("resucitation");
}

function onClickMedicationSmall() {
    document.querySelector(".medication").classList.add("medication-on");
    addAllOtions("medication");
}

function onClickAnamnesysSmall() {
    document.querySelector(".anamnesys").classList.add("anamnesys-on");
    addAllOtions("anamnesys");
}

function onClickShigraSmall() {
    document.querySelector(".shigra").classList.add("shigra-on");
    addAllOtions("shigra");
}

function onClickTraumaSmall() {
    document.querySelector(".trauma").classList.add("trauma-on");
    addAllOtions("trauma");
}


/**
 * on click burger sign :
 * opens nav 
 * adds listeners to icons
 * @param {Event} event 
 */
function onClickBurger(event) {
    burgerNav.classList.add("open");
    burgerNav.querySelector(".x-icon").addEventListener("click", closeBurgerNav);

    document.getElementById("burgerHome").addEventListener("click", backHomePage);
    document.getElementById("burgerHome").addEventListener("click", closeBurgerNav);

    document.getElementById("burgerAnatomy").addEventListener("click", onClickAnatomyHome);
    document.getElementById("burgerAnatomy").addEventListener("click", closeBurgerNav);

    document.getElementById("burgerResucitation").addEventListener("click", onClickResucitationHome);
    document.getElementById("burgerResucitation").addEventListener("click", closeBurgerNav);

    document.getElementById("burgerMedication").addEventListener("click", onClickMedicationHome);
    document.getElementById("burgerMedication").addEventListener("click", closeBurgerNav);

    document.getElementById("burgerAnamnesys").addEventListener("click", onClickAnamnesysHome);
    document.getElementById("burgerAnamnesys").addEventListener("click", closeBurgerNav);

    document.getElementById("burgerShigra").addEventListener("click", onClickShigraHome);
    document.getElementById("burgerShigra").addEventListener("click", closeBurgerNav);

    document.getElementById("burgerTrauma").addEventListener("click", onClickTraumaHome);
    document.getElementById("burgerTrauma").addEventListener("click", closeBurgerNav);


    // let icons = burgerNav.querySelectorAll(".icon");

    // // go over all the icons and add click listeners
    // for (let i = 0; i < icons.length; i++) {
    //     const element = icons[i];
    //     element.addEventListener("click", onClickIcon);
    // }
}

/**
 * on click icon in burger nav : 
 * change src to marked image 
 * un mark prev image
 * @param {Event} event 
 */
function onClickIcon(event) {

    console.log("gal");

    let icons = burgerNav.querySelectorAll(".icon");

    // go over all the icons and restars the image src
    for (let i = 0; i < icons.length; i++) {
        const element = icons[i];
        element.querySelector("img").src = element.querySelector("img").src.replace("-current", "");
    }

    // change current image src
    event.currentTarget.querySelector("img").src = event.currentTarget.querySelector("img").src.replace(".svg", "-current.svg");
}

/**
 * on click x icon in burger nav : 
 * close burger nav
 * remove listeners from icons
 * @param {Event} event 
 */
function closeBurgerNav(event) {
    burgerNav.classList.remove("open");
    burgerNav.querySelector(".x-icon").removeEventListener("click", closeBurgerNav);

    // let icons = burgerNav.querySelectorAll(".icon");

    // // go over all the icons and remove click listeners
    // for (let i = 0; i < icons.length; i++) {
    //     const element = icons[i];
    //     element.removeEventListener("click", onClickIcon);
    // }
}
